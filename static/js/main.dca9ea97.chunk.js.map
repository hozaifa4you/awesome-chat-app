{"version":3,"sources":["components/MessageForm.jsx","components/MyMessage.jsx","components/TheirMessage.jsx","components/ChatFeed.jsx","components/LoginForm.jsx","App.jsx","index.js"],"names":["MessageForm","props","chatId","creds","useState","value","setValue","handleSubmit","e","preventDefault","text","trim","length","sendMessage","className","onSubmit","type","placeholder","onChange","target","isTyping","htmlFor","PictureOutlined","id","multiple","style","display","files","SendOutlined","MyMessage","message","attachments","src","file","alt","float","marginRight","color","backgroundColor","TheirMessage","lastMessage","isFirstMessageByUser","sender","username","backgroundImage","avatar","marginLeft","ChatFeed","chats","activeChat","userName","messages","chat","renderReadReceipts","isMyMessage","people","map","person","index","last_read","title","keys","Object","key","lastMessageKey","width","renderMessages","height","LoginForm","setUsername","password","setPassword","err","setErr","a","authObject","axios","get","headers","localStorage","setItem","window","location","reload","console","log","required","align","App","getItem","projectID","userSecret","renderChatFeed","chatAppFeed","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.dca9ea97.chunk.js","sourcesContent":["import { useState } from \"react\";\r\nimport { sendMessage, isTyping } from \"react-chat-engine\";\r\nimport { SendOutlined, PictureOutlined } from \"@ant-design/icons\";\r\n\r\nconst MessageForm = props => {\r\n\tconst { chatId, creds } = props;\r\n\r\n\tconst [value, setValue] = useState(\"\");\r\n\r\n\tconst handleSubmit = e => {\r\n\t\te.preventDefault();\r\n\t\tconst text = value.trim();\r\n\r\n\t\tif (text.length > 0) sendMessage(creds, chatId, { text });\r\n\r\n\t\tsetValue(\"\");\r\n\t};\r\n\r\n\tconst handleChange = e => {\r\n\t\tsetValue(e.target.value);\r\n\t\tisTyping(props, chatId);\r\n\t};\r\n\r\n\tconst handleUpload = e => {\r\n\t\tsendMessage(creds, chatId, { files: e.target.files, text: \"\" });\r\n\t};\r\n\r\n\treturn (\r\n\t\t<form className='message-form' onSubmit={handleSubmit}>\r\n\t\t\t<input\r\n\t\t\t\ttype='text'\r\n\t\t\t\tclassName='message-input'\r\n\t\t\t\tplaceholder='Send a message...'\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tonChange={handleChange}\r\n\t\t\t\tonSubmit={handleSubmit}\r\n\t\t\t/>\r\n\t\t\t<label htmlFor='upload-button'>\r\n\t\t\t\t<span className='image-button'>\r\n\t\t\t\t\t<PictureOutlined className='picture-icon' />\r\n\t\t\t\t</span>\r\n\t\t\t</label>\r\n\t\t\t<input\r\n\t\t\t\ttype='file'\r\n\t\t\t\tid='upload-button'\r\n\t\t\t\tmultiple={false}\r\n\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\tonChange={handleUpload}\r\n\t\t\t/>\r\n\t\t\t<button type='submit' className='send-button'>\r\n\t\t\t\t<SendOutlined className='send-icon' />\r\n\t\t\t</button>\r\n\t\t</form>\r\n\t);\r\n};\r\n\r\nexport default MessageForm;\r\n","const MyMessage = ({ message }) => {\r\n\tif (message?.attachments?.length > 0) {\r\n\t\treturn (\r\n\t\t\t<img\r\n\t\t\t\tsrc={message.attachments[0].file}\r\n\t\t\t\talt='message-img'\r\n\t\t\t\tclassName='message-image'\r\n\t\t\t\tstyle={{ float: \"right\" }}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName='message'\r\n\t\t\tstyle={{\r\n\t\t\t\tfloat: \"right\",\r\n\t\t\t\tmarginRight: \"18px\",\r\n\t\t\t\tcolor: \"white\",\r\n\t\t\t\tbackgroundColor: \"#eb2a50\",\r\n\t\t\t}}>\r\n\t\t\t{message.text}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default MyMessage;\r\n","const TheirMessage = ({ lastMessage, message }) => {\r\n\tconst isFirstMessageByUser =\r\n\t\t!lastMessage || lastMessage.sender.username !== message.sender.username;\r\n\r\n\treturn (\r\n\t\t<div className='message-row'>\r\n\t\t\t{isFirstMessageByUser && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='message-avatar'\r\n\t\t\t\t\tstyle={{ backgroundImage: `url(${message?.sender?.avatar})` }}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\t{message?.attachments?.length > 0 ? (\r\n\t\t\t\t<img\r\n\t\t\t\t\tsrc={message.attachments[0].file}\r\n\t\t\t\t\talt='message-attachment'\r\n\t\t\t\t\tclassName='message-image'\r\n\t\t\t\t\tstyle={{ marginLeft: isFirstMessageByUser ? \"4px\" : \"48px\" }}\r\n\t\t\t\t/>\r\n\t\t\t) : (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName='message'\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tfloat: \"left\",\r\n\t\t\t\t\t\tcolor: \"white\",\r\n\t\t\t\t\t\tbackgroundColor: \"#eb2a50\",\r\n\t\t\t\t\t\tmarginLeft: isFirstMessageByUser ? \"4px\" : \"48px\",\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{message.text}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default TheirMessage;\r\n","import MessageForm from \"./MessageForm\";\r\nimport MyMessage from \"./MyMessage\";\r\nimport TheirMessage from \"./TheirMessage\";\r\n\r\nconst ChatFeed = props => {\r\n\tconst { chats, activeChat, userName, messages } = props;\r\n\r\n\tconst chat = chats && chats[activeChat];\r\n\r\n\tconst renderReadReceipts = (message, isMyMessage) => {\r\n\t\treturn chat.people.map(\r\n\t\t\t(person, index) =>\r\n\t\t\t\tperson.last_read === message.id && (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tkey={`read_${index}`}\r\n\t\t\t\t\t\tclassName='read-receipt'\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tfloat: isMyMessage ? \"right\" : \"left\",\r\n\t\t\t\t\t\t\tbackgroundImage: `url(${person?.person?.avatar})`,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t);\r\n\t};\r\n\r\n\tconst renderMessages = () => {\r\n\t\tconst keys = Object.keys(messages);\r\n\r\n\t\treturn keys.map((key, index) => {\r\n\t\t\tconst message = messages[key];\r\n\t\t\tconst lastMessageKey = index === 0 ? null : keys[index - 1];\r\n\t\t\tconst isMyMessage = userName === message.sender.username;\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div key={`msg_${index}`} style={{ width: \"100%\" }}>\r\n\t\t\t\t\t<div className='message-block'>\r\n\t\t\t\t\t\t{isMyMessage ? (\r\n\t\t\t\t\t\t\t<MyMessage message={message} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<TheirMessage\r\n\t\t\t\t\t\t\t\tmessage={message}\r\n\t\t\t\t\t\t\t\tlastMessage={messages[lastMessageKey]}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName='read-receipts'\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tmarginRight: isMyMessage ? \"18px\" : \"0px\",\r\n\t\t\t\t\t\t\tmarginLeft: isMyMessage ? \"0px\" : \"68px\",\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{renderReadReceipts(message, isMyMessage)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t});\r\n\t};\r\n\r\n\tif (!chat) return \"Loading...\";\r\n\r\n\treturn (\r\n\t\t<div className='chat-feed'>\r\n\t\t\t<div className='chat-title-container'>\r\n\t\t\t\t<div className='chat-title'>{chat.title}</div>\r\n\t\t\t\t<div className='chat-subtitle'>\r\n\t\t\t\t\t{chat.people.map(person => ` ${person.person.username}`)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t{renderMessages()}\r\n\t\t\t<div style={{ height: \"100px\" }} />\r\n\t\t\t<div className='message-form-container'>\r\n\t\t\t\t<MessageForm {...props} chatId={activeChat} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ChatFeed;\r\n","import { useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst LoginForm = () => {\r\n\tconst [username, setUsername] = useState(\"\");\r\n\tconst [password, setPassword] = useState(\"\");\r\n\tconst [err, setErr] = useState(\"\");\r\n\r\n\tconst handleSubmit = async e => {\r\n\t\te.preventDefault();\r\n\r\n\t\tconst authObject = {\r\n\t\t\t\"Project-ID\": \"f1e62e3c-d024-44f5-a48f-7adfeb7b8052\",\r\n\t\t\t\"User-Name\": username,\r\n\t\t\t\"User-Secret\": password,\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\t// try to find out your account...\r\n\t\t\tawait axios.get(\"https://api.chatengine.io/chats\", {\r\n\t\t\t\theaders: authObject,\r\n\t\t\t});\r\n\t\t\t// if done  -> login\r\n\r\n\t\t\tlocalStorage.setItem(\"username\", username);\r\n\t\t\tlocalStorage.setItem(\"password\", password);\r\n\t\t\twindow.location.reload();\r\n\t\t} catch (err) {\r\n\t\t\t// if error -> try with new username...\r\n\t\t\tconsole.log(err);\r\n\t\t\tsetErr(\"Oops! incorrect credentials!\");\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className='wrapper'>\r\n\t\t\t<div className='from'>\r\n\t\t\t\t<h1 className='title'>Chat Application</h1>\r\n\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\tvalue={username}\r\n\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\tsetUsername(e.target.value);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName='input'\r\n\t\t\t\t\t\tplaceholder='Username'\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\t\tsetPassword(e.target.value);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName='input'\r\n\t\t\t\t\t\tplaceholder='Password'\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div align='center'>\r\n\t\t\t\t\t\t<button className='button' type='submit'>\r\n\t\t\t\t\t\t\t<span>Start Chatting</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<h2 className='error'>{err}</h2>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default LoginForm;\r\n","import React from \"react\";\r\nimport { ChatEngine } from \"react-chat-engine\";\r\nimport \"./App.css\";\r\nimport ChatFeed from \"./components/ChatFeed\";\r\nimport LoginForm from \"./components/LoginForm\";\r\n\r\nfunction App() {\r\n\tif (!localStorage.getItem(\"username\")) return <LoginForm />;\r\n\r\n\treturn (\r\n\t\t<ChatEngine\r\n\t\t\theight='100vh'\r\n\t\t\tprojectID='f1e62e3c-d024-44f5-a48f-7adfeb7b8052'\r\n\t\t\tuserName={localStorage.getItem(\"username\")}\r\n\t\t\tuserSecret={localStorage.getItem(\"password\")}\r\n\t\t\trenderChatFeed={chatAppFeed => <ChatFeed {...chatAppFeed} />}\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}